<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proyecto Final Interactivo: Ajedrez y Pensamiento Estratégico</title>
    
    <!-- Librerías de Ajedrez - ENLACES FIABLES Y ESTABLES -->
    <link rel="stylesheet" href="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.css" integrity="sha384-q94+BZSKZYurFVEGn/tc/Zv76ADS+s51kLwtN/VXUYAD6AOFPikBf/WsCXRyRmpe" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.js" integrity="sha384-8Vi8VHwn3vjQ9eUHUxex3JSN/NFqUg3iUMNqxeCXferA1iJhNf4I/AmpHdg1sdQF" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.2/chess.js" integrity="sha384-s3XgLpTduGeCYM9cfDXI+blCj+2iTxk9AGs0CGM2ltUFNUoT8dx1K3uA5fxTggT" crossorigin="anonymous"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Playfair+Display:wght@700&family=Noto+Serif:ital,wght@0,400;0,700;1,400&display=swap');
        body { font-family: 'Noto Serif', serif; line-height: 1.8; background-color: #f8f9fa; color: #212529; margin: 0; padding-top: 60px; scroll-behavior: smooth; }
        .container { max-width: 950px; margin: 20px auto; padding: 30px 50px; background: #ffffff; box-shadow: 0 10px 30px rgba(0,0,0,0.08); border-radius: 10px; border-top: 5px solid #005f73; }
        nav { position: fixed; top: 0; left: 0; width: 100%; background-color: #001219; padding: 10px 0; box-shadow: 0 3px 8px rgba(0,0,0,0.25); z-index: 1000; text-align: center; }
        nav a { color: #e9d8a6; text-decoration: none; font-family: 'Roboto', sans-serif; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; margin: 0 15px; padding: 10px 15px; border-radius: 5px; transition: background-color 0.3s, color 0.3s; }
        nav a:hover { background-color: #94d2bd; color: #001219; }
        h1, h2, h3 { font-family: 'Playfair Display', serif; color: #005f73; }
        .project-subtitle { text-align: center; font-size: 1.4em; font-weight: bold; letter-spacing: 2px; text-transform: uppercase; color: #0a9396; margin-bottom: -10px; font-family: 'Playfair Display', serif;}
        h1 { font-size: 3em; text-align: center; margin-bottom: 25px; font-weight: 700; }
        h2 { font-size: 2.2em; border-bottom: 3px solid #94d2bd; padding-bottom: 15px; margin-top: 60px; }
        #game-container { display: flex; flex-wrap: wrap; justify-content: center; align-items: flex-start; gap: 25px; }
        #myBoard { width: 100%; max-width: 450px; border: 8px solid #3A3836; box-shadow: 0 15px 25px rgba(0,0,0,0.25); }
        #game-controls { flex-grow: 1; min-width: 300px; max-width: 400px; }
        .controls-nav button { font-family: 'Roboto', sans-serif; font-size: 1.1em; padding: 10px 18px; margin: 5px; border: 2px solid #005f73; background-color: #fff; color: #005f73; border-radius: 5px; cursor: pointer; transition: all 0.2s; }
        .controls-nav button:hover { background-color: #005f73; color: #fff; transform: translateY(-2px); }
        .controls-nav button:disabled { background-color: #ccc; border-color: #ccc; color: #666; cursor: not-allowed; transform: none; }
        #commentary { background-color: #eaf2f8; border-left: 5px solid #3498db; padding: 15px; margin-top: 20px; border-radius: 8px; min-height: 80px; font-style: italic; font-size: 1.05em; }
    </style>
</head>
<body>
    
    <nav>
        <a href="#presentacion">Presentación</a>
        <a href="#desarrollo">Partida Interactiva</a>
        <!-- Los otros enlaces aquí si los necesitas -->
    </nav>

    <div class="container">
        <section id="presentacion">
            <p class="project-subtitle">Proyecto Final</p>
            <h1>AJEDREZ Y PENSAMIENTO ESTRATÉGICO</h1>
        </section>

        <section id="desarrollo">
            <h2>Partida Interactiva</h2>
            <p>Utiliza los botones de navegación para reproducir la partida movimiento a movimiento. Los comentarios y reflexiones estratégicas aparecerán para cada jugada clave.</p>
            
            <div id="game-container">
                <div id="myBoard"></div>
                
                <div id="game-controls">
                    <div class="controls-nav">
                        <button id="startBtn">« Inicio</button>
                        <button id="prevBtn">‹ Anterior</button>
                        <button id="nextBtn">Siguiente ›</button>
                        <button id="endBtn">Fin »</button>
                    </div>
                    <h4>Estado Actual:</h4>
                    <div id="status" style="font-weight: bold; font-family: 'Roboto', sans-serif;"></div>
                    <h4>Comentarios de la Jugada:</h4>
                    <div id="commentary">¡Usa los botones para comenzar la partida!</div>
                </div>
            </div>
        </section>
    </div>

<script>
$(document).ready(function() {
    var board = null;
    var game = new Chess();
    var pgn = `[Event "Proyecto Final"]
[Site "Lichess.org"]
[Date "2024.07.15"]
[White "Luis Anderson Novoa Ramirez"]
[Black "Oponente"]
[Result "1-0"]

1. e4 c5 2. Nf3 Nc6 3. Bc4 e6 4. d3 a6 5. Bg5 f6 6. Bh4 b6 7. b3 Nge7 8. O-O h6 9. Ba3 Qa5 10. Bb2 d6 11. Qd2 g5 12. Bg3 e5 13. h4 Qb4 14. c3 Qa5 15. b4 cxb4 16. cxb4 Qa4 17. Bb3 Qb5 18. a3 a5 19. Nc3 Qa6 20. b5 Qb7 21. bxc6 Qxc6 22. Ba4 b5 23. Bxb5 Qd7 24. Bxd7+ Bxd7 25. d4 exd4 26. Nxd4 gxh4 27. Bxh4 Ng6 28. Bxf6 Rg8 29. Nd5 Rc8 30. Rac1 Rxc1 31. Rxc1 Ne5 32. Bxe5 dxe5 33. Nf6+ Kf7 34. Nxd7 exd4 35. Qxd4 Bxa3 36. Rc7 Ke6 37. Nc5+ Bxc5 38. Qxc5 Rd8 39. Qe7# 1-0`;
    
    var history = null;
    var currentMoveIndex = -1;

    var comments = {
        1: "El oponente inicia con la Defensa Siciliana (1...c5).",
        8: "Enroque corto. La seguridad del rey es la prioridad.",
        33: "Este jaque marca el inicio del ataque decisivo.",
        39: "¡Jaque Mate! La coordinación de las piezas fue clave."
    };

    function updateStatus() {
        var status = '';
        var moveColor = game.turn() === 'b' ? 'Negras' : 'Blancas';

        if (game.game_over()) {
            if (game.in_checkmate()) {
                status = 'Jaque Mate. Ganan las ' + moveColor;
            } else {
                status = 'Partida terminada en tablas.';
            }
        } else {
            status = 'Turno de las ' + moveColor;
        }

        $('#status').html(status);

        var moveNumber = Math.floor(currentMoveIndex / 2) + 1;
        var comment = comments[moveNumber] || "---";
        if(currentMoveIndex === -1) comment = "¡Usa los botones para comenzar la partida!";
        $('#commentary').html(comment);

        $('#startBtn').prop('disabled', currentMoveIndex === -1);
        $('#prevBtn').prop('disabled', currentMoveIndex === -1);
        $('#nextBtn').prop('disabled', currentMoveIndex === history.length - 1);
        $('#endBtn').prop('disabled', currentMoveIndex === history.length - 1);
    }
    
    var config = {
      position: 'start',
      pieceTheme: 'https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/img/chesspieces/wikipedia/{piece}.png'
    };
    board = Chessboard('myBoard', config);

    game.load_pgn(pgn);
    history = game.history();
    
    // Funciones de navegación
    $('#startBtn').on('click', function () {
      game.reset();
      board.start();
      currentMoveIndex = -1;
      updateStatus();
    });

    $('#prevBtn').on('click', function () {
      if (currentMoveIndex > -1) {
        game.undo();
        currentMoveIndex--;
        board.position(game.fen());
        updateStatus();
      }
    });

    $('#nextBtn').on('click', function () {
      if (currentMoveIndex < history.length - 1) {
        currentMoveIndex++;
        game.move(history[currentMoveIndex]);
        board.position(game.fen());
        updateStatus();
      }
    });

    $('#endBtn').on('click', function () {
      game.load_pgn(pgn);
      board.position(game.fen());
      currentMoveIndex = history.length - 1;
      updateStatus();
    });

    updateStatus();
});
</script>

</body>
</html>
